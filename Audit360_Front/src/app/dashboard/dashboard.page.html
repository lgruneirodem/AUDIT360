
<ion-content>
  <div class="container ion-padding">
    <!-- Alerta de actividad -->
    <div class="alert-custom">
      <span>‚ö†Ô∏è Alerta: Se detectaron m√°s de 250 operaciones recientes. Revisa la actividad.</span>
      <ion-button class="btn-alerta"fill="clear" size="small"  >‚úï</ion-button>
    </div>

    <!-- Tarjetas resumen -->
    <div class="cards-container">
      <div *ngFor="let item of summary" class="audit-card" (click)="irAHistorial(item.label)">
        <div class="count">{{ item.count }}</div>
        <div class="label">{{ item.label }}</div>
      </div>
    </div>

    <!-- Caja de filtros -->
    <div class="filter-box">
      <h6>üîé Filtros</h6>
      <ion-grid>
        <ion-row>
          <ion-col size="12" size-md="4">
            <ion-label>Tipo de operaci√≥n</ion-label>
            <ion-select  placeholder="Todas">
              <ion-select-option value="">Todas</ion-select-option>
              <ion-select-option value="Insert">Insert</ion-select-option>
              <ion-select-option value="Update">Update</ion-select-option>
              <ion-select-option value="Delete">Delete</ion-select-option>
              <ion-select-option value="Rollback">Rollback</ion-select-option>
            </ion-select>
          </ion-col>
          <ion-col size="12" size-md="4">
            <ion-label>Nombre de tabla</ion-label>
            <ion-input placeholder="ej: users"></ion-input>
          </ion-col>
          <ion-col size="12" size-md="4" class="ion-align-self-end">
            <ion-button expand="block" (click)="aplicarFiltros()">Aplicar filtros</ion-button>
          </ion-col>
        </ion-row>
      </ion-grid>
    </div>

    <ion-segment [(ngModel)]="tablaSeleccionada" color="primary">
      <ion-segment-button value="gestion">
        <ion-label>Gesti√≥n de auditor√≠a</ion-label>
      </ion-segment-button>
      <ion-segment-button value="sospechosa">
        <ion-label>Log y Monitorizaci√≥n</ion-label>
      </ion-segment-button>
    </ion-segment>

    <div [ngSwitch]="tablaSeleccionada">
      
      <ng-container *ngSwitchCase="'gestion'">
        <app-tabla-configuracion [tabla]="tablaSeleccionada"></app-tabla-configuracion>
      </ng-container>

      <ng-container *ngSwitchCase="'logs'">
        <app-tabla-logs [tabla]="tablaSeleccionada"></app-tabla-logs>
      </ng-container>
    </div>
    <!-- Tabla -->
    <div class="table-box">
      <ion-grid>
        <ion-row>
          <ion-col><strong>Tabla </strong></ion-col>
          <ion-col><strong>Registros</strong></ion-col>
          <ion-col><strong>Estados Auditor√≠a</strong></ion-col>
          <ion-col><strong>√öltima operaci√≥n</strong></ion-col>
          <ion-col><strong>Alertas</strong></ion-col>
          <ion-col><strong>Acciones</strong></ion-col>
        </ion-row>

        <ion-row *ngFor="let table of tablaFiltrada">
          <ion-col>{{ table.name }}</ion-col>
          <ion-col>{{ table.rows }}</ion-col>
          <ion-col><span [ngClass]="getAuditIcon(table.audited)" class="audit-icon">{{ getAuditIcon(table.audited) }}</span></ion-col>
          <ion-col>{{ table.lastOp }}</ion-col>
          <ion-col>{{ table.lastOp }}</ion-col>
          <ion-col>{{ table.lastOp }}</ion-col>
        </ion-row>

        <ion-row *ngIf="tablaFiltrada.length === 0">
          <ion-col size="12" class="ion-text-center text-muted">No hay resultados</ion-col>
        </ion-row>
      </ion-grid>
    </div>

  </div>
</ion-content>